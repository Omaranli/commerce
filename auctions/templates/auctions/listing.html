{% extends "auctions/layout.html" %}

{% block body%}
    <div class="container">
        <div class="row">
            <div class="col-12 col-sm-12 col-lg-5">
                <div class="row p-3">
                    <div class="col-12 mt-3 mb-3">
                        {% if listing.image %}
                            <img src="{{ listing.image }}" alt="{{ listing.title }}" class="img-fluid">
                        {% else %}
                            <img src="https://www.hwh-web.at/images/no-image-available.png" alt="{{ listing.title }}" class="img-fluid">
                        {% endif %}
                    </div>
                    {% if user.is_authenticated %}
                        <div class="col-12 px-5">
                            <div class="row">
                                {% if is_in_watchlist %}
                                    <form form class="col-6" action="{% url 'remove_to_watchlist' listing_id=listing.id %}" method="POST">
                                        {% csrf_token %}
                                        <div class="row"><input type="submit" class="col-12" value="remove to watchlist"></div>
                                    </form>
                                {% else %}
                                    <form form class="col-6" action="{% url 'add_to_watchlist' listing_id=listing.id %}" method="POST">
                                        {% csrf_token %}
                                        <div class="row"><input type="submit" class="col-12" value="add to watchlist"></div>
                                    </form>
                                {% endif %}
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-12 col-sm-12 col-lg-7 mt-3">
                <div class="row">
                    <div class="col-12 mt-3"><h3>{{ listing.title }}</h3></div>
                    <div class="col-12"><hr></div>
                    <div class="col-12">
                        <div class="row">
                            <div class="col-12 mt-3">Place a bid</div>
                            <form action="" method="POST" class="col-6 p-3">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-12">
                                        <input type="number" min="1" required>
                                        <input type="submit" name="bid" value="bid now">
                                    </div>
                                    <div class="col-4"></div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-12 my-3"><u>Description</u></div>
                    <div class="col-12"><p>{{ listing.description }}</p></div>
                    <div class="col-6">
                        <div class="row">
                            <div class="col-12 p-3">
                                <div class="row">
                                    <div class="col-5">Listed by:</div>
                                    <div class="col-7"><strong>{{ listing.creator }}</strong></div>
                                </div>
                            </div>
                            <div class="col-12 p-3">
                                <div class="row">
                                    <div class="col-5">Starting price:</div>
                                    <div class="col-7"><strong>$ {{ listing.price }}</strong></div>
                                </div>
                            </div>
                            <div class="col-12 p-3">
                                <div class="row">
                                    {% if listing.bid %}
                                        <div class="col-5">Current Bid:</div>
                                        <div class="col-7"><strong>$ {{ listing.bid }}</strong></div>
                                    {% else %}
                                        <div class="col-12">No bid yet. be the first to bid</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 mt-5 text-center">
                <div class="row">
                    <div class="col-12 col-lg-6">
                        <form class="row py-3" action="" method="post">
                            {% csrf_token %}
                            <div class="col-12 text-center">
                                <input class="px-5" type="text" name="comment" required>
                                <input type="submit" name="comment" value="comment">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6 mt-3">
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
                sdkjflksqdlkflqskjflkflkjdlfjsldjflkqsjdf
            </div>
        </div>
    </div>
{% endblock %}